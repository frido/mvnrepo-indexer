package frido.mvnrepo.indexer;

import java.util.concurrent.Executor;
import java.util.concurrent.Executors;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

/*
 * This Java source file was generated by the Gradle 'init' task.
 */
public class App2 {

    Logger log = LoggerFactory.getLogger(App2.class);
    
    public static void main(String[] args) {
        Database database = new MongoDatabase();
        Executor executor = Executors.newFixedThreadPool(2);
        HttpClient httpClient = new JerseyHttpClient();
        Consumer pomHandler = new PomHandler(database);
        Downloader downloader = new Downloader(executor, httpClient, pomHandler);
        database.getAll("metadata").forEach(doc -> {
            downloader.start(doc);
        });
    }
}
