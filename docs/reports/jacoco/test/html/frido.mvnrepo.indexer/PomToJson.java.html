<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="sk"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PomToJson.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">mvnrepo-indexer</a> &gt; <a href="index.source.html" class="el_package">frido.mvnrepo.indexer</a> &gt; <span class="el_source">PomToJson.java</span></div><h1>PomToJson.java</h1><pre class="source lang-java linenums">package frido.mvnrepo.indexer;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.nio.charset.StandardCharsets;
import java.util.ArrayList;
import java.util.List;
import java.util.Properties;

import org.apache.maven.model.Activation;
import org.apache.maven.model.ActivationFile;
import org.apache.maven.model.ActivationOS;
import org.apache.maven.model.ActivationProperty;
import org.apache.maven.model.Build;
import org.apache.maven.model.BuildBase;
import org.apache.maven.model.CiManagement;
import org.apache.maven.model.Contributor;
import org.apache.maven.model.Dependency;
import org.apache.maven.model.DependencyManagement;
import org.apache.maven.model.Developer;
import org.apache.maven.model.DistributionManagement;
import org.apache.maven.model.Exclusion;
import org.apache.maven.model.Extension;
import org.apache.maven.model.IssueManagement;
import org.apache.maven.model.License;
import org.apache.maven.model.MailingList;
import org.apache.maven.model.Model;
import org.apache.maven.model.Notifier;
import org.apache.maven.model.Organization;
import org.apache.maven.model.Parent;
import org.apache.maven.model.Plugin;
import org.apache.maven.model.PluginExecution;
import org.apache.maven.model.PluginManagement;
import org.apache.maven.model.Prerequisites;
import org.apache.maven.model.Profile;
import org.apache.maven.model.Relocation;
import org.apache.maven.model.ReportPlugin;
import org.apache.maven.model.ReportSet;
import org.apache.maven.model.Reporting;
import org.apache.maven.model.Repository;
import org.apache.maven.model.RepositoryPolicy;
import org.apache.maven.model.Resource;
import org.apache.maven.model.Scm;
import org.apache.maven.model.Site;
import org.apache.maven.model.io.xpp3.MavenXpp3Reader;
import org.bson.Document;
import org.codehaus.plexus.util.xml.pull.XmlPullParserException;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

// TODO: bad class, wrong name, static
<span class="fc" id="L52">public class PomToJson {</span>

<span class="fc" id="L54">    static Logger log = LoggerFactory.getLogger(PomToJson.class);</span>

    public Document toJsonMain(String content) {
<span class="fc" id="L57">        MavenXpp3Reader reader = new MavenXpp3Reader();</span>
<span class="fc" id="L58">        Model model = null;</span>
        try {
<span class="fc" id="L60">            model = reader.read(new ByteArrayInputStream(content.getBytes(StandardCharsets.UTF_8)));</span>
<span class="nc" id="L61">        } catch (IOException e) {</span>
<span class="nc" id="L62">            log.error(e.getMessage(), e);</span>
<span class="nc" id="L63">        } catch (XmlPullParserException e) {</span>
<span class="nc" id="L64">            log.error(e.getMessage(), e);</span>
<span class="pc" id="L65">        }</span>

<span class="pc bpc" id="L67" title="1 of 2 branches missed.">        if(model == null) return null;</span>
<span class="fc" id="L68">        Document d = new Document();</span>
<span class="fc" id="L69">        d.put(&quot;ArtifactId&quot;, toJson(model.getArtifactId()));</span>
<span class="fc" id="L70">        d.put(&quot;Build&quot;, toJson(model.getBuild()));</span>
<span class="fc" id="L71">        d.put(&quot;CiManagement&quot;, toJson(model.getCiManagement()));</span>
<span class="fc" id="L72">        d.put(&quot;Id&quot;, toJson(model.getId()));</span>
<span class="fc" id="L73">        d.put(&quot;GroupId&quot;, toJson(model.getGroupId()));</span>
<span class="fc" id="L74">        d.put(&quot;ModelEncoding&quot;, toJson(model.getModelEncoding()));</span>
<span class="fc" id="L75">        d.put(&quot;ModelVersion&quot;, toJson(model.getModelVersion()));</span>
<span class="fc" id="L76">        d.put(&quot;Description&quot;, toJson(model.getDescription()));</span>
<span class="fc" id="L77">        d.put(&quot;InceptionYear&quot;, toJson(model.getInceptionYear()));</span>
<span class="fc" id="L78">        d.put(&quot;Name&quot;, toJson(model.getName()));</span>
<span class="fc" id="L79">        d.put(&quot;Packaging&quot;, toJson(model.getPackaging()));</span>
<span class="fc" id="L80">        d.put(&quot;Url&quot;, toJson(model.getUrl()));</span>
<span class="fc" id="L81">        d.put(&quot;Version&quot;, toJson(model.getVersion()));</span>
<span class="fc" id="L82">        d.put(&quot;IssueManagement&quot;, toJson(model.getIssueManagement()));</span>
<span class="fc" id="L83">        d.put(&quot;DependencyManagement&quot;, toJson(model.getDependencyManagement()));</span>
<span class="fc" id="L84">        d.put(&quot;DistributionManagement&quot;, toJson(model.getDistributionManagement()));</span>
<span class="fc" id="L85">        d.put(&quot;Contributors&quot;, toJsonCon(model.getContributors()));</span>
<span class="fc" id="L86">        d.put(&quot;Developers&quot;, toJsonDev(model.getDevelopers()));</span>
<span class="fc" id="L87">        d.put(&quot;Licenses&quot;, toJsonLic(model.getLicenses()));</span>
<span class="fc" id="L88">        d.put(&quot;MailingLists&quot;, toJsonMai(model.getMailingLists()));</span>
<span class="fc" id="L89">        d.put(&quot;Organization&quot;, toJson(model.getOrganization()));</span>
<span class="fc" id="L90">        d.put(&quot;Parent&quot;, toJson(model.getParent()));</span>
        //d.put(&quot;&quot;, toJson(model.getPomFile())); // NOTE: ignore file
<span class="fc" id="L92">        d.put(&quot;Prerequisites&quot;, toJson(model.getPrerequisites()));</span>
<span class="fc" id="L93">        d.put(&quot;Profiles&quot;, toJsonPro(model.getProfiles()));</span>
        //d.put(&quot;&quot;, toJson(model.getProjectDirectory())); // NOTE: ignore file
<span class="fc" id="L95">        d.put(&quot;Scm&quot;, toJson(model.getScm()));</span>
<span class="fc" id="L96">        d.put(&quot;Dependencies&quot;, toJsonDep(model.getDependencies()));</span>
<span class="fc" id="L97">        d.put(&quot;Modules&quot;, toJsonString(model.getModules()));</span>
<span class="fc" id="L98">        d.put(&quot;PluginRepositories&quot;, toJsonRep(model.getPluginRepositories()));</span>
        //d.put(&quot;&quot;, toJson(model.getProperties())); NOTE: ignore
<span class="fc" id="L100">        d.put(&quot;Repositories&quot;, toJsonRep(model.getRepositories()));</span>
<span class="fc" id="L101">        return d;</span>
    }

    private List&lt;Document&gt; toJsonDev(List&lt;Developer&gt; developers) {
<span class="fc" id="L105">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L106" title="1 of 2 branches missed.">        if(developers == null) return out;</span>
<span class="pc" id="L107">        developers.forEach(developer -&gt; out.add(toJson(developer)));</span>
<span class="fc" id="L108">        return out;</span>
    }

    private Document toJson(Developer developer) {
<span class="nc bnc" id="L112" title="All 2 branches missed.">        if(developer == null) return null;</span>
<span class="nc" id="L113">        Document d = new Document();</span>
<span class="nc" id="L114">        d.put(&quot;Id&quot;, toJson(developer.getId()));</span>
<span class="nc" id="L115">        d.put(&quot;Organization&quot;, toJson(developer.getOrganization()));</span>
        // d.put(&quot;&quot;, toJson(developer.getProperties())); NOTE: ignore
<span class="nc" id="L117">        d.put(&quot;OrganizationUrl&quot;, toJson(developer.getOrganizationUrl()));</span>
<span class="nc" id="L118">        d.put(&quot;Email&quot;, toJson(developer.getEmail()));</span>
<span class="nc" id="L119">        d.put(&quot;Name&quot;, toJson(developer.getName()));</span>
<span class="nc" id="L120">        d.put(&quot;Timezone&quot;, toJson(developer.getTimezone()));</span>
<span class="nc" id="L121">        d.put(&quot;Url&quot;, toJson(developer.getUrl()));</span>
<span class="nc" id="L122">        d.put(&quot;Roles&quot;, toJsonString(developer.getRoles()));</span>
<span class="nc" id="L123">        return d;</span>
    }


    private List&lt;Document&gt; toJsonLic(List&lt;License&gt; licenses) {
<span class="fc" id="L128">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L129" title="1 of 2 branches missed.">        if(licenses == null) return out;</span>
<span class="fc" id="L130">        licenses.forEach(license -&gt; out.add(toJson(license)));</span>
<span class="fc" id="L131">        return out;</span>
    }

    private Document toJson(License license) {
<span class="pc bpc" id="L135" title="1 of 2 branches missed.">        if(license == null) return null;</span>
<span class="fc" id="L136">        Document d = new Document();</span>
<span class="fc" id="L137">        d.put(&quot;Distribution&quot;, toJson(license.getDistribution()));</span>
<span class="fc" id="L138">        d.put(&quot;Comments&quot;, toJson(license.getComments()));</span>
<span class="fc" id="L139">        d.put(&quot;Name&quot;, toJson(license.getName()));</span>
<span class="fc" id="L140">        d.put(&quot;Url&quot;, toJson(license.getUrl()));</span>
<span class="fc" id="L141">        return d;</span>
    }

    private List&lt;Document&gt; toJsonMai(List&lt;MailingList&gt; mailingLists) {
<span class="fc" id="L145">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L146" title="1 of 2 branches missed.">        if(mailingLists == null) return out;</span>
<span class="fc" id="L147">        mailingLists.forEach(mailingList -&gt; out.add(toJson(mailingList)));</span>
<span class="fc" id="L148">        return out;</span>
    }

    private Document toJson(MailingList mailingList) {
<span class="pc bpc" id="L152" title="1 of 2 branches missed.">        if(mailingList == null) return null;</span>
<span class="fc" id="L153">        Document d = new Document();</span>
<span class="fc" id="L154">        d.put(&quot;Archive&quot;, toJson(mailingList.getArchive()));</span>
<span class="fc" id="L155">        d.put(&quot;Name&quot;, toJson(mailingList.getName()));</span>
<span class="fc" id="L156">        d.put(&quot;Post&quot;, toJson(mailingList.getPost()));</span>
<span class="fc" id="L157">        d.put(&quot;Subscribe&quot;, toJson(mailingList.getSubscribe()));</span>
<span class="fc" id="L158">        d.put(&quot;Unsubscribe&quot;, toJson(mailingList.getUnsubscribe()));</span>
<span class="fc" id="L159">        d.put(&quot;OtherArchives&quot;, toJsonString(mailingList.getOtherArchives()));</span>
<span class="fc" id="L160">        return d;</span>
    }

    private List&lt;String&gt; toJsonString(List&lt;String&gt; texts) {
<span class="fc" id="L164">        return texts;</span>
    }

    private Document toJson(Prerequisites prerequisites) {
<span class="pc bpc" id="L168" title="1 of 2 branches missed.">        if(prerequisites == null) return null;</span>
<span class="nc" id="L169">        Document d = new Document();</span>
<span class="nc" id="L170">        d.put(&quot;Maven&quot;, toJson(prerequisites.getMaven()));</span>
<span class="nc" id="L171">        return d;</span>
    }

    private Document toJson(Organization organization) {
<span class="pc bpc" id="L175" title="1 of 2 branches missed.">        if(organization == null) return null;</span>
<span class="fc" id="L176">        Document d = new Document();</span>
<span class="fc" id="L177">        d.put(&quot;Name&quot;, toJson(organization.getName()));</span>
<span class="fc" id="L178">        d.put(&quot;Url&quot;, toJson(organization.getUrl()));</span>
<span class="fc" id="L179">        return d;</span>
    }

    private Document toJson(Parent parent) {
<span class="pc bpc" id="L183" title="1 of 2 branches missed.">        if(parent == null) return null;</span>
<span class="fc" id="L184">        Document d = new Document();</span>
<span class="fc" id="L185">        d.put(&quot;ArtifactId&quot;, toJson(parent.getArtifactId()));</span>
<span class="fc" id="L186">        d.put(&quot;Id&quot;, toJson(parent.getId()));</span>
<span class="fc" id="L187">        d.put(&quot;GroupId&quot;, toJson(parent.getGroupId()));</span>
<span class="fc" id="L188">        d.put(&quot;RelativePath&quot;, toJson(parent.getRelativePath()));</span>
<span class="fc" id="L189">        d.put(&quot;Version&quot;, toJson(parent.getVersion()));</span>
<span class="fc" id="L190">        return d;</span>
    }

    private List&lt;Document&gt; toJsonPro(List&lt;Profile&gt; profiles) {
<span class="fc" id="L194">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L195" title="1 of 2 branches missed.">        if(profiles == null) return out;</span>
<span class="fc" id="L196">        profiles.forEach(profile -&gt; out.add(toJson(profile)));</span>
<span class="fc" id="L197">        return out;</span>
    }

    private Document toJson(Profile profile) {
<span class="pc bpc" id="L201" title="1 of 2 branches missed.">        if(profile == null) return null;</span>
<span class="fc" id="L202">        Document d = new Document();</span>
<span class="fc" id="L203">        d.put(&quot;DependencyManagement&quot;, toJson(profile.getDependencyManagement()));</span>
<span class="fc" id="L204">        d.put(&quot;DistributionManagement&quot;, toJson(profile.getDistributionManagement()));</span>
<span class="fc" id="L205">        d.put(&quot;Id&quot;, toJson(profile.getId()));</span>
        // d.put(&quot;&quot;, toJson(profile.getProperties())); NOTE: ignore
<span class="fc" id="L207">        d.put(&quot;Source&quot;, toJson(profile.getSource()));</span>
<span class="fc" id="L208">        d.put(&quot;Modules&quot;, toJsonString(profile.getModules()));</span>
<span class="fc" id="L209">        d.put(&quot;Build&quot;, toJson(profile.getBuild()));</span>
<span class="fc" id="L210">        d.put(&quot;Activation&quot;, toJson(profile.getActivation()));</span>
<span class="fc" id="L211">        d.put(&quot;Dependencies&quot;, toJsonDep(profile.getDependencies()));</span>
<span class="fc" id="L212">        d.put(&quot;PluginRepositories&quot;, toJsonPre(profile.getPluginRepositories()));</span>
<span class="fc" id="L213">        d.put(&quot;Reporting&quot;, toJson(profile.getReporting()));</span>
<span class="fc" id="L214">        d.put(&quot;Repositories&quot;, toJsonRep(profile.getRepositories()));</span>
<span class="fc" id="L215">        return d;</span>
    }

    private Document toJson(Reporting reporting) {
<span class="fc bfc" id="L219" title="All 2 branches covered.">        if(reporting == null) return null;</span>
<span class="fc" id="L220">        Document d = new Document();</span>
<span class="fc" id="L221">        d.put(&quot;OutputDirectory&quot;, toJson(reporting.getOutputDirectory()));</span>
<span class="fc" id="L222">        d.put(&quot;ExcludeDefaults&quot;, toJson(reporting.getExcludeDefaults()));</span>
<span class="fc" id="L223">        d.put(&quot;Plugins&quot;, toJsonPlu(reporting.getPlugins()));</span>
        // d.put(&quot;&quot;, toJson(reporting.getReportPluginsAsMap())); NOTE: ignore for now
<span class="fc" id="L225">        return d;</span>
    }

    private List&lt;Document&gt; toJsonPlu(List&lt;ReportPlugin&gt; plugins) {
<span class="fc" id="L229">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L230" title="1 of 2 branches missed.">        if(plugins == null) return out;</span>
<span class="fc" id="L231">        plugins.forEach(plugin -&gt; out.add(toJson(plugin)));</span>
<span class="fc" id="L232">        return out;</span>
    }

    private Document toJson(ReportPlugin plugin) {
<span class="pc bpc" id="L236" title="1 of 2 branches missed.">        if(plugin == null) return null;</span>
<span class="fc" id="L237">        Document d = new Document();</span>
<span class="fc" id="L238">        d.put(&quot;ArtifactId&quot;, toJson(plugin.getArtifactId()));</span>
<span class="fc" id="L239">        d.put(&quot;GroupId&quot;, toJson(plugin.getGroupId()));</span>
<span class="fc" id="L240">        d.put(&quot;Key&quot;, toJson(plugin.getKey()));</span>
<span class="fc" id="L241">        d.put(&quot;Version&quot;, toJson(plugin.getVersion()));</span>
<span class="fc" id="L242">        d.put(&quot;ReportSets&quot;, toJsonRes(plugin.getReportSets()));</span>
        //d.put(&quot;&quot;, toJson(plugin.getReportSetsAsMap())); NOTE: ignore
        //d.put(&quot;&quot;, toJson(plugin.getConfiguration())); NOTE: ignore
<span class="fc" id="L245">        return d;</span>
    }

    private List&lt;Document&gt; toJsonRes(List&lt;ReportSet&gt; reportSets) {
<span class="fc" id="L249">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L250" title="1 of 2 branches missed.">        if(reportSets == null) return out;</span>
<span class="pc" id="L251">        reportSets.forEach(reportSet -&gt; out.add(toJson(reportSet)));</span>
<span class="fc" id="L252">        return out;</span>
    }

    private Document toJson(ReportSet reportSet) {
<span class="nc bnc" id="L256" title="All 2 branches missed.">        if(reportSet == null) return null;</span>
<span class="nc" id="L257">        Document d = new Document();</span>
<span class="nc" id="L258">        d.put(&quot;Id&quot;, toJson(reportSet.getId()));</span>
<span class="nc" id="L259">        d.put(&quot;Reports&quot;, toJsonString(reportSet.getReports()));</span>
<span class="nc" id="L260">        return d;</span>
    }

    private List&lt;Document&gt; toJsonPre(List&lt;Repository&gt; pluginRepositories) {
<span class="fc" id="L264">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L265" title="1 of 2 branches missed.">        if(pluginRepositories == null) return out;</span>
<span class="pc" id="L266">        pluginRepositories.forEach(pluginRepositorie -&gt; out.add(toJsonPre(pluginRepositorie)));</span>
<span class="fc" id="L267">        return out;</span>
    }

    private Document toJsonPre(Repository pluginRepositorie) {
<span class="nc bnc" id="L271" title="All 2 branches missed.">        if(pluginRepositorie == null) return null;</span>
<span class="nc" id="L272">        Document d = new Document();</span>
<span class="nc" id="L273">        d.put(&quot;Id&quot;, toJson(pluginRepositorie.getId()));</span>
<span class="nc" id="L274">        d.put(&quot;Layout&quot;, toJson(pluginRepositorie.getLayout()));</span>
<span class="nc" id="L275">        d.put(&quot;Name&quot;, toJson(pluginRepositorie.getName()));</span>
<span class="nc" id="L276">        d.put(&quot;Url&quot;, toJson(pluginRepositorie.getUrl()));</span>
<span class="nc" id="L277">        d.put(&quot;Releases&quot;, toJson(pluginRepositorie.getReleases()));</span>
<span class="nc" id="L278">        d.put(&quot;Snapshots&quot;, toJson(pluginRepositorie.getSnapshots()));</span>
<span class="nc" id="L279">        return d;</span>
    }

    private Document toJson(RepositoryPolicy releases) {
<span class="pc bpc" id="L283" title="1 of 2 branches missed.">        if(releases == null) return null;</span>
<span class="nc" id="L284">        Document d = new Document();</span>
<span class="nc" id="L285">        d.put(&quot;ChecksumPolicy&quot;, toJson(releases.getChecksumPolicy()));</span>
<span class="nc" id="L286">        d.put(&quot;Enabled&quot;, toJson(releases.getEnabled()));</span>
<span class="nc" id="L287">        d.put(&quot;UpdatePolicy&quot;, toJson(releases.getUpdatePolicy()));</span>
<span class="nc" id="L288">        return d;</span>
    }

    private Document toJson(Activation activation) {
<span class="fc bfc" id="L292" title="All 2 branches covered.">        if(activation == null) return null;</span>
<span class="fc" id="L293">        Document d = new Document();</span>
<span class="fc" id="L294">        d.put(&quot;Jdk&quot;, toJson(activation.getJdk()));</span>
<span class="fc" id="L295">        d.put(&quot;File&quot;, toJson(activation.getFile()));</span>
<span class="fc" id="L296">        d.put(&quot;Os&quot;, toJson(activation.getOs()));</span>
<span class="fc" id="L297">        d.put(&quot;Property&quot;, toJson(activation.getProperty()));</span>
<span class="fc" id="L298">        return d;</span>
    }

    private Document toJson(ActivationProperty property) {
<span class="pc bpc" id="L302" title="1 of 2 branches missed.">        if(property == null) return null;</span>
<span class="fc" id="L303">        Document d = new Document();</span>
<span class="fc" id="L304">        d.put(&quot;Name&quot;, toJson(property.getName()));</span>
<span class="fc" id="L305">        d.put(&quot;Value&quot;, toJson(property.getValue()));</span>
<span class="fc" id="L306">        return d;</span>
    }

    private Object toJson(ActivationOS os) {
<span class="pc bpc" id="L310" title="1 of 2 branches missed.">        if(os == null) return null;</span>
<span class="nc" id="L311">        Document d = new Document();</span>
<span class="nc" id="L312">        d.put(&quot;Arch&quot;, toJson(os.getArch()));</span>
<span class="nc" id="L313">        d.put(&quot;Family&quot;, toJson(os.getFamily()));</span>
<span class="nc" id="L314">        d.put(&quot;Name&quot;, toJson(os.getName()));</span>
<span class="nc" id="L315">        d.put(&quot;Version&quot;, toJson(os.getVersion()));</span>
<span class="nc" id="L316">        return d;</span>
    }

    private Document toJson(ActivationFile file) {
<span class="pc bpc" id="L320" title="1 of 2 branches missed.">        if(file == null) return null;</span>
<span class="nc" id="L321">        Document d = new Document();</span>
<span class="nc" id="L322">        d.put(&quot;Exists&quot;, toJson(file.getExists()));</span>
<span class="nc" id="L323">        d.put(&quot;Missing&quot;, toJson(file.getMissing()));</span>
<span class="nc" id="L324">        return d;</span>
    }

    private Document toJson(BuildBase build) {
<span class="fc bfc" id="L328" title="All 2 branches covered.">        if(build == null) return null;</span>
<span class="fc" id="L329">        Document d = new Document();</span>
<span class="fc" id="L330">        d.put(&quot;Directory&quot;, toJson(build.getDirectory()));</span>
<span class="fc" id="L331">        d.put(&quot;DefaultGoal&quot;, toJson(build.getDefaultGoal()));</span>
<span class="fc" id="L332">        d.put(&quot;FinalName&quot;, toJson(build.getFinalName()));</span>
<span class="fc" id="L333">        d.put(&quot;PluginManagement&quot;, toJson(build.getPluginManagement()));</span>
<span class="fc" id="L334">        d.put(&quot;Filters&quot;, toJsonString(build.getFilters()));</span>
<span class="fc" id="L335">        d.put(&quot;Resources&quot;, toJsonRsc(build.getResources()));</span>
<span class="fc" id="L336">        d.put(&quot;TestResources&quot;, toJsonRsc(build.getTestResources()));</span>
<span class="fc" id="L337">        d.put(&quot;Plugins&quot;, toJsonPgn(build.getPlugins()));</span>
<span class="fc" id="L338">        return d;</span>
    }

    private List&lt;Document&gt; toJsonPgn(List&lt;Plugin&gt; plugins) {
<span class="fc" id="L342">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L343" title="1 of 2 branches missed.">        if(plugins == null) return out;</span>
<span class="fc" id="L344">        plugins.forEach(plugin -&gt; out.add(toJson(plugin)));</span>
<span class="fc" id="L345">        return out;</span>
    }

    private Document toJson(Plugin plugin) {
<span class="pc bpc" id="L349" title="1 of 2 branches missed.">        if(plugin == null) return null;</span>
<span class="fc" id="L350">        Document d = new Document();</span>
<span class="fc" id="L351">        d.put(&quot;ArtifactId&quot;, toJson(plugin.getArtifactId()));</span>
<span class="fc" id="L352">        d.put(&quot;Id&quot;, toJson(plugin.getId()));</span>
<span class="fc" id="L353">        d.put(&quot;GroupId&quot;, toJson(plugin.getGroupId()));</span>
<span class="fc" id="L354">        d.put(&quot;Extensions&quot;, toJson(plugin.getExtensions()));</span>
<span class="fc" id="L355">        d.put(&quot;Key&quot;, toJson(plugin.getKey()));</span>
<span class="fc" id="L356">        d.put(&quot;Version&quot;, toJson(plugin.getVersion()));</span>
<span class="fc" id="L357">        d.put(&quot;Inherited&quot;, toJson(plugin.getInherited()));</span>
<span class="fc" id="L358">        d.put(&quot;Dependencies&quot;, toJsonDep(plugin.getDependencies()));</span>
<span class="fc" id="L359">        d.put(&quot;Executions&quot;, toJsonExe(plugin.getExecutions()));</span>
<span class="fc" id="L360">        return d;</span>
    }

    private List&lt;Document&gt; toJsonExe(List&lt;PluginExecution&gt; executions) {
<span class="fc" id="L364">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L365" title="1 of 2 branches missed.">        if(executions == null) return out;</span>
<span class="fc" id="L366">        executions.forEach(execution -&gt; out.add(toJson(execution)));</span>
<span class="fc" id="L367">        return out;</span>
    }

    private Document toJson(PluginExecution execution) {
<span class="pc bpc" id="L371" title="1 of 2 branches missed.">        if(execution == null) return null;</span>
<span class="fc" id="L372">        Document d = new Document();</span>
<span class="fc" id="L373">        d.put(&quot;Id&quot;, toJson(execution.getId()));</span>
<span class="fc" id="L374">        d.put(&quot;Phase&quot;, toJson(execution.getPhase()));</span>
<span class="fc" id="L375">        d.put(&quot;Inherited&quot;, toJson(execution.getInherited()));</span>
<span class="fc" id="L376">        d.put(&quot;Goals&quot;, toJsonString(execution.getGoals()));</span>
<span class="fc" id="L377">        d.put(&quot;Priority&quot;, toJson(execution.getPriority()));</span>
<span class="fc" id="L378">        return d;</span>
    }

    private int toJson(int number) {
<span class="fc" id="L382">        return number;</span>
    }

    private List&lt;Document&gt; toJsonRsc(List&lt;Resource&gt; resources) {
<span class="fc" id="L386">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L387" title="1 of 2 branches missed.">        if(resources == null) return out;</span>
<span class="pc" id="L388">        resources.forEach(resource -&gt; out.add(toJson(resource)));</span>
<span class="fc" id="L389">        return out;</span>
    }

    private Document toJson(Resource resource) {
<span class="nc bnc" id="L393" title="All 2 branches missed.">        if(resource == null) return null;</span>
<span class="nc" id="L394">        Document d = new Document();</span>
<span class="nc" id="L395">        d.put(&quot;MergeId&quot;, toJson(resource.getMergeId()));</span>
<span class="nc" id="L396">        d.put(&quot;Directory&quot;, toJson(resource.getDirectory()));</span>
<span class="nc" id="L397">        d.put(&quot;Filtering&quot;, toJson(resource.getFiltering()));</span>
<span class="nc" id="L398">        d.put(&quot;TargetPath&quot;, toJson(resource.getTargetPath()));</span>
<span class="nc" id="L399">        d.put(&quot;Excludes&quot;, toJsonString(resource.getExcludes()));</span>
<span class="nc" id="L400">        d.put(&quot;Includes&quot;, toJsonString(resource.getIncludes()));</span>
<span class="nc" id="L401">        return d;</span>
    }

    private Object toJson(PluginManagement pluginManagement) {
<span class="fc bfc" id="L405" title="All 2 branches covered.">        if(pluginManagement == null) return null;</span>
<span class="fc" id="L406">        Document d = new Document();</span>
<span class="fc" id="L407">        d.put(&quot;Plugins&quot;, toJsonPgn(pluginManagement.getPlugins()));</span>
<span class="fc" id="L408">        return d;</span>
    }

    private Document toJson(Scm scm) {
<span class="pc bpc" id="L412" title="1 of 2 branches missed.">        if(scm == null) return null;</span>
<span class="fc" id="L413">        Document d = new Document();</span>
<span class="fc" id="L414">        d.put(&quot;Connection&quot;, toJson(scm.getConnection()));</span>
<span class="fc" id="L415">        d.put(&quot;DeveloperConnection&quot;, toJson(scm.getDeveloperConnection()));</span>
<span class="fc" id="L416">        d.put(&quot;Tag&quot;, toJson(scm.getTag()));</span>
<span class="fc" id="L417">        d.put(&quot;Url&quot;, toJson(scm.getUrl()));</span>
<span class="fc" id="L418">        return d;</span>
    }

    private List&lt;Document&gt; toJsonDep(List&lt;Dependency&gt; dependencies) {
<span class="fc" id="L422">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L423" title="1 of 2 branches missed.">        if(dependencies == null) return out;</span>
<span class="fc" id="L424">        dependencies.forEach(dependencie -&gt; out.add(toJson(dependencie)));</span>
<span class="fc" id="L425">        return out;</span>
    }

    private Document toJson(Dependency dependencie) {
<span class="pc bpc" id="L429" title="1 of 2 branches missed.">        if(dependencie == null) return null;</span>
<span class="fc" id="L430">        Document d = new Document();</span>
<span class="fc" id="L431">        d.put(&quot;ManagementKey&quot;, toJson(dependencie.getManagementKey()));</span>
<span class="fc" id="L432">        d.put(&quot;ArtifactId&quot;, toJson(dependencie.getArtifactId()));</span>
<span class="fc" id="L433">        d.put(&quot;Classifier&quot;, toJson(dependencie.getClassifier()));</span>
<span class="fc" id="L434">        d.put(&quot;GroupId&quot;, toJson(dependencie.getGroupId()));</span>
<span class="fc" id="L435">        d.put(&quot;Optional&quot;, toJson(dependencie.getOptional()));</span>
<span class="fc" id="L436">        d.put(&quot;Scope&quot;, toJson(dependencie.getScope()));</span>
<span class="fc" id="L437">        d.put(&quot;SystemPath&quot;, toJson(dependencie.getSystemPath()));</span>
<span class="fc" id="L438">        d.put(&quot;Type&quot;, toJson(dependencie.getType()));</span>
<span class="fc" id="L439">        d.put(&quot;Version&quot;, toJson(dependencie.getVersion()));</span>
<span class="fc" id="L440">        d.put(&quot;Exclusions&quot;, toJsonPex(dependencie.getExclusions()));</span>
<span class="fc" id="L441">        return d;</span>
    }

    private List&lt;Document&gt; toJsonPex(List&lt;Exclusion&gt; exclusions) {
<span class="fc" id="L445">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L446" title="1 of 2 branches missed.">        if(exclusions == null) return out;</span>
<span class="fc" id="L447">        exclusions.forEach(exclusion -&gt; out.add(toJson(exclusion)));</span>
<span class="fc" id="L448">        return out;</span>
    }

    private Document toJson(Exclusion exclusion) {
<span class="pc bpc" id="L452" title="1 of 2 branches missed.">        if(exclusion == null) return null;</span>
<span class="fc" id="L453">        Document d = new Document();</span>
<span class="fc" id="L454">        d.put(&quot;ArtifactId&quot;, toJson(exclusion.getArtifactId()));</span>
<span class="fc" id="L455">        d.put(&quot;GroupId&quot;, toJson(exclusion.getGroupId()));</span>
<span class="fc" id="L456">        return d;</span>
    }

    @Deprecated
    private Document toJson(Properties properties) {
<span class="nc bnc" id="L461" title="All 2 branches missed.">        if(properties == null) return null;</span>
<span class="nc" id="L462">        Document d = new Document();</span>
        //d.put(&quot;&quot;, toJson(properties.get));
<span class="nc" id="L464">        return d;</span>
    }
    
    private List&lt;Document&gt; toJsonRep(List&lt;Repository&gt; repositories) {
<span class="fc" id="L468">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L469" title="1 of 2 branches missed.">        if(repositories == null) return out;</span>
<span class="pc" id="L470">        repositories.forEach(repositorie -&gt; out.add(toJson(repositorie)));</span>
<span class="fc" id="L471">        return out;</span>
    }

    private Document toJson(Repository repositorie) {
<span class="pc bpc" id="L475" title="1 of 2 branches missed.">        if(repositorie == null) return null;</span>
<span class="fc" id="L476">        Document d = new Document();</span>
<span class="fc" id="L477">        d.put(&quot;Snapshots&quot;, toJson(repositorie.getSnapshots()));</span>
<span class="fc" id="L478">        d.put(&quot;Releases&quot;, toJson(repositorie.getReleases()));</span>
<span class="fc" id="L479">        d.put(&quot;Url&quot;, toJson(repositorie.getUrl()));</span>
<span class="fc" id="L480">        d.put(&quot;Name&quot;, toJson(repositorie.getName()));</span>
<span class="fc" id="L481">        d.put(&quot;Layout&quot;, toJson(repositorie.getLayout()));</span>
<span class="fc" id="L482">        d.put(&quot;Id&quot;, toJson(repositorie.getId()));</span>
<span class="fc" id="L483">        return d;</span>
    }

    private List&lt;Document&gt; toJsonCon(List&lt;Contributor&gt; contributors) {
<span class="fc" id="L487">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L488" title="1 of 2 branches missed.">        if(contributors == null) return out;</span>
<span class="pc" id="L489">        contributors.forEach(contributor -&gt; out.add(toJson(contributor)));</span>
<span class="fc" id="L490">        return out;</span>
    }

    private Document toJson(Contributor contributor) {
<span class="nc bnc" id="L494" title="All 2 branches missed.">        if(contributor == null) return null;</span>
<span class="nc" id="L495">        Document d = new Document();</span>
<span class="nc" id="L496">        d.put(&quot;Organization&quot;, toJson(contributor.getOrganization()));</span>
        // d.put(&quot;&quot;, toJson(contributor.getProperties())); NOTE: ignore
<span class="nc" id="L498">        d.put(&quot;OrganizationUrl&quot;, toJson(contributor.getOrganizationUrl()));</span>
<span class="nc" id="L499">        d.put(&quot;Email&quot;, toJson(contributor.getEmail()));</span>
<span class="nc" id="L500">        d.put(&quot;Name&quot;, toJson(contributor.getName()));</span>
<span class="nc" id="L501">        d.put(&quot;Timezone&quot;, toJson(contributor.getTimezone()));</span>
<span class="nc" id="L502">        d.put(&quot;Url&quot;, toJson(contributor.getUrl()));</span>
<span class="nc" id="L503">        d.put(&quot;Roles&quot;, toJsonString(contributor.getRoles()));</span>
<span class="nc" id="L504">        return d;</span>
    }

    private Document toJson(DistributionManagement distributionManagement) {
<span class="fc bfc" id="L508" title="All 2 branches covered.">        if(distributionManagement == null) return null;</span>
<span class="fc" id="L509">        Document d = new Document();</span>
<span class="fc" id="L510">        d.put(&quot;DownloadUrl&quot;, toJson(distributionManagement.getDownloadUrl()));</span>
<span class="fc" id="L511">        d.put(&quot;Repository&quot;, toJson(distributionManagement.getRepository())); // as repository</span>
<span class="fc" id="L512">        d.put(&quot;SnapshotRepository&quot;, toJson(distributionManagement.getSnapshotRepository())); // as repository</span>
<span class="fc" id="L513">        d.put(&quot;Status&quot;, toJson(distributionManagement.getStatus()));</span>
<span class="fc" id="L514">        d.put(&quot;Relocation&quot;, toJson(distributionManagement.getRelocation()));</span>
<span class="fc" id="L515">        d.put(&quot;Site&quot;, toJson(distributionManagement.getSite()));</span>
<span class="fc" id="L516">        return d;</span>
    }

    private Object toJson(Site site) {
<span class="pc bpc" id="L520" title="1 of 2 branches missed.">        if(site == null) return null;</span>
<span class="nc" id="L521">        Document d = new Document();</span>
<span class="nc" id="L522">        d.put(&quot;Id&quot;, toJson(site.getId()));</span>
<span class="nc" id="L523">        d.put(&quot;Name&quot;, toJson(site.getName()));</span>
<span class="nc" id="L524">        d.put(&quot;Url&quot;, toJson(site.getUrl()));</span>
<span class="nc" id="L525">        return d;</span>
    }

    private Object toJson(Relocation relocation) {
<span class="pc bpc" id="L529" title="1 of 2 branches missed.">        if(relocation == null) return null;</span>
<span class="nc" id="L530">        Document d = new Document();</span>
<span class="nc" id="L531">        d.put(&quot;ArtifactId&quot;, toJson(relocation.getArtifactId()));</span>
<span class="nc" id="L532">        d.put(&quot;GroupId&quot;, toJson(relocation.getGroupId()));</span>
<span class="nc" id="L533">        d.put(&quot;Message&quot;, toJson(relocation.getMessage()));</span>
<span class="nc" id="L534">        d.put(&quot;Version&quot;, toJson(relocation.getVersion()));</span>
<span class="nc" id="L535">        return d;</span>
    }

    private Document toJson(DependencyManagement dependencyManagement) {
<span class="fc bfc" id="L539" title="All 2 branches covered.">        if(dependencyManagement == null) return null;</span>
<span class="fc" id="L540">        Document d = new Document();</span>
<span class="fc" id="L541">        d.put(&quot;Dependencies&quot;, toJsonDep(dependencyManagement.getDependencies()));</span>
<span class="fc" id="L542">        return d;</span>
    }

    private Document toJson(IssueManagement issueManagement) {
<span class="pc bpc" id="L546" title="1 of 2 branches missed.">        if(issueManagement == null) return null;</span>
<span class="fc" id="L547">        Document d = new Document();</span>
<span class="fc" id="L548">        d.put(&quot;System&quot;, toJson(issueManagement.getSystem()));</span>
<span class="fc" id="L549">        d.put(&quot;Url&quot;, toJson(issueManagement.getUrl()));</span>
<span class="fc" id="L550">        return d;</span>
    }

    private String toJson(String text) {
<span class="fc" id="L554">        return text;</span>
    }

    private Document toJson(CiManagement ciManagement) {
<span class="pc bpc" id="L558" title="1 of 2 branches missed.">        if(ciManagement == null) return null;</span>
<span class="nc" id="L559">        Document d = new Document();</span>
<span class="nc" id="L560">        d.put(&quot;System&quot;, toJson(ciManagement.getSystem()));</span>
<span class="nc" id="L561">        d.put(&quot;Url&quot;, toJson(ciManagement.getUrl()));</span>
<span class="nc" id="L562">        d.put(&quot;Notifiers&quot;, toJsonNot(ciManagement.getNotifiers()));</span>
<span class="nc" id="L563">        return d;</span>
    }

    private List&lt;Document&gt; toJsonNot(List&lt;Notifier&gt; notifiers) {
<span class="nc" id="L567">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L568" title="All 2 branches missed.">        if(notifiers == null) return out;</span>
<span class="nc" id="L569">        notifiers.forEach(notifier -&gt; out.add(toJson(notifier)));</span>
<span class="nc" id="L570">        return out;</span>
    }

    private Document toJson(Notifier notifier) {
<span class="nc bnc" id="L574" title="All 2 branches missed.">        if(notifier == null) return null;</span>
<span class="nc" id="L575">        Document d = new Document();</span>
<span class="nc" id="L576">        d.put(&quot;Address&quot;, toJson(notifier.getAddress()));</span>
        // d.put(&quot;&quot;, toJson(notifier.getConfiguration())); NOTE: ignore
<span class="nc" id="L578">        d.put(&quot;Type&quot;, toJson(notifier.getType()));</span>
<span class="nc" id="L579">        return d;</span>
    }

    private Document toJson(Build build) {
<span class="pc bpc" id="L583" title="1 of 2 branches missed.">        if(build == null) return null;</span>
<span class="fc" id="L584">        Document d = new Document();</span>
<span class="fc" id="L585">        d.put(&quot;PluginManagement&quot;, toJson(build.getPluginManagement()));</span>
<span class="fc" id="L586">        d.put(&quot;OutputDirectory&quot;, toJson(build.getOutputDirectory()));</span>
<span class="fc" id="L587">        d.put(&quot;ScriptSourceDirectory&quot;, toJson(build.getScriptSourceDirectory()));</span>
<span class="fc" id="L588">        d.put(&quot;SourceDirectory&quot;, toJson(build.getSourceDirectory()));</span>
<span class="fc" id="L589">        d.put(&quot;TestOutputDirectory&quot;, toJson(build.getTestOutputDirectory()));</span>
<span class="fc" id="L590">        d.put(&quot;TestSourceDirectory&quot;, toJson(build.getTestSourceDirectory()));</span>
<span class="fc" id="L591">        d.put(&quot;DefaultGoal&quot;, toJson(build.getDefaultGoal()));</span>
<span class="fc" id="L592">        d.put(&quot;Directory&quot;, toJson(build.getDirectory()));</span>
<span class="fc" id="L593">        d.put(&quot;FinalName&quot;, toJson(build.getFinalName()));</span>
<span class="fc" id="L594">        d.put(&quot;Extensions&quot;, toJsonExt(build.getExtensions()));</span>
<span class="fc" id="L595">        d.put(&quot;Filters&quot;, toJsonString(build.getFilters()));</span>
<span class="fc" id="L596">        d.put(&quot;Plugins&quot;, toJsonPgn(build.getPlugins()));</span>
<span class="fc" id="L597">        d.put(&quot;Resources&quot;, toJsonRsc(build.getResources()));</span>
<span class="fc" id="L598">        d.put(&quot;TestResources&quot;, toJsonRsc(build.getTestResources()));</span>
<span class="fc" id="L599">        return d;</span>
    }

    private List&lt;Document&gt; toJsonExt(List&lt;Extension&gt; extensions) {
<span class="fc" id="L603">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L604" title="1 of 2 branches missed.">        if(extensions == null) return out;</span>
<span class="pc" id="L605">        extensions.forEach(extension -&gt; out.add(toJson(extension)));</span>
<span class="fc" id="L606">        return out;</span>
    }

    private Document toJson(Extension extension) {
<span class="nc bnc" id="L610" title="All 2 branches missed.">        if(extension == null) return null;</span>
<span class="nc" id="L611">        Document d = new Document();</span>
<span class="nc" id="L612">        d.put(&quot;ArtifactId&quot;, toJson(extension.getArtifactId()));</span>
<span class="nc" id="L613">        d.put(&quot;GroupId&quot;, toJson(extension.getGroupId()));</span>
<span class="nc" id="L614">        d.put(&quot;Version&quot;, toJson(extension.getVersion()));</span>
<span class="nc" id="L615">        return d;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.8.201612092310</span></div></body></html>