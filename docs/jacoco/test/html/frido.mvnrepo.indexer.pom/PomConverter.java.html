<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PomConverter.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">mvnrepo-indexer</a> &gt; <a href="index.source.html" class="el_package">frido.mvnrepo.indexer.pom</a> &gt; <span class="el_source">PomConverter.java</span></div><h1>PomConverter.java</h1><pre class="source lang-java linenums">package frido.mvnrepo.indexer.pom;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.nio.charset.StandardCharsets;
import java.util.ArrayList;
import java.util.List;

import org.apache.maven.model.Activation;
import org.apache.maven.model.ActivationFile;
import org.apache.maven.model.ActivationOS;
import org.apache.maven.model.ActivationProperty;
import org.apache.maven.model.Build;
import org.apache.maven.model.BuildBase;
import org.apache.maven.model.CiManagement;
import org.apache.maven.model.Contributor;
import org.apache.maven.model.Dependency;
import org.apache.maven.model.DependencyManagement;
import org.apache.maven.model.Developer;
import org.apache.maven.model.DistributionManagement;
import org.apache.maven.model.Exclusion;
import org.apache.maven.model.Extension;
import org.apache.maven.model.IssueManagement;
import org.apache.maven.model.License;
import org.apache.maven.model.MailingList;
import org.apache.maven.model.Model;
import org.apache.maven.model.Notifier;
import org.apache.maven.model.Organization;
import org.apache.maven.model.Parent;
import org.apache.maven.model.Plugin;
import org.apache.maven.model.PluginExecution;
import org.apache.maven.model.PluginManagement;
import org.apache.maven.model.Prerequisites;
import org.apache.maven.model.Profile;
import org.apache.maven.model.Relocation;
import org.apache.maven.model.ReportPlugin;
import org.apache.maven.model.ReportSet;
import org.apache.maven.model.Reporting;
import org.apache.maven.model.Repository;
import org.apache.maven.model.RepositoryPolicy;
import org.apache.maven.model.Resource;
import org.apache.maven.model.Scm;
import org.apache.maven.model.Site;
import org.apache.maven.model.io.xpp3.MavenXpp3Reader;
import org.bson.Document;
import org.codehaus.plexus.util.xml.pull.XmlPullParserException;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

<span class="fc" id="L50">public class PomConverter {</span>

<span class="fc" id="L52">    static Logger log = LoggerFactory.getLogger(PomConverter.class);</span>

    public Document valueOf(String content) {
<span class="fc" id="L55">        MavenXpp3Reader reader = new MavenXpp3Reader();</span>
<span class="fc" id="L56">        Model model = null;</span>
        try {
<span class="fc" id="L58">            model = reader.read(new ByteArrayInputStream(content.getBytes(StandardCharsets.UTF_8)));</span>
<span class="nc" id="L59">        } catch (IOException | XmlPullParserException e) {</span>
<span class="nc" id="L60">            log.error(e.getMessage(), e);</span>
<span class="fc" id="L61">        }</span>

<span class="pc bpc" id="L63" title="1 of 2 branches missed.">        if(model == null) return null;</span>
<span class="fc" id="L64">        Document d = new Document();</span>
<span class="fc" id="L65">        d.put(&quot;ArtifactId&quot;, toJson(model.getArtifactId()));</span>
<span class="fc" id="L66">        d.put(&quot;Build&quot;, toJson(model.getBuild()));</span>
<span class="fc" id="L67">        d.put(&quot;CiManagement&quot;, toJson(model.getCiManagement()));</span>
<span class="fc" id="L68">        d.put(&quot;Id&quot;, toJson(model.getId()));</span>
<span class="fc" id="L69">        d.put(&quot;GroupId&quot;, toJson(model.getGroupId()));</span>
<span class="fc" id="L70">        d.put(&quot;ModelEncoding&quot;, toJson(model.getModelEncoding()));</span>
<span class="fc" id="L71">        d.put(&quot;ModelVersion&quot;, toJson(model.getModelVersion()));</span>
<span class="fc" id="L72">        d.put(&quot;Description&quot;, toJson(model.getDescription()));</span>
<span class="fc" id="L73">        d.put(&quot;InceptionYear&quot;, toJson(model.getInceptionYear()));</span>
<span class="fc" id="L74">        d.put(&quot;Name&quot;, toJson(model.getName()));</span>
<span class="fc" id="L75">        d.put(&quot;Packaging&quot;, toJson(model.getPackaging()));</span>
<span class="fc" id="L76">        d.put(&quot;Url&quot;, toJson(model.getUrl()));</span>
<span class="fc" id="L77">        d.put(&quot;Version&quot;, toJson(model.getVersion()));</span>
<span class="fc" id="L78">        d.put(&quot;IssueManagement&quot;, toJson(model.getIssueManagement()));</span>
<span class="fc" id="L79">        d.put(&quot;DependencyManagement&quot;, toJson(model.getDependencyManagement()));</span>
<span class="fc" id="L80">        d.put(&quot;DistributionManagement&quot;, toJson(model.getDistributionManagement()));</span>
<span class="fc" id="L81">        d.put(&quot;Contributors&quot;, toJsonCon(model.getContributors()));</span>
<span class="fc" id="L82">        d.put(&quot;Developers&quot;, toJsonDev(model.getDevelopers()));</span>
<span class="fc" id="L83">        d.put(&quot;Licenses&quot;, toJsonLic(model.getLicenses()));</span>
<span class="fc" id="L84">        d.put(&quot;MailingLists&quot;, toJsonMai(model.getMailingLists()));</span>
<span class="fc" id="L85">        d.put(&quot;Organization&quot;, toJson(model.getOrganization()));</span>
<span class="fc" id="L86">        d.put(&quot;Parent&quot;, toJson(model.getParent()));</span>
        //d.put(&quot;&quot;, toJson(model.getPomFile())); // NOTE: ignore file
<span class="fc" id="L88">        d.put(&quot;Prerequisites&quot;, toJson(model.getPrerequisites()));</span>
<span class="fc" id="L89">        d.put(&quot;Profiles&quot;, toJsonPro(model.getProfiles()));</span>
        //d.put(&quot;&quot;, toJson(model.getProjectDirectory())); // NOTE: ignore file
<span class="fc" id="L91">        d.put(&quot;Scm&quot;, toJson(model.getScm()));</span>
<span class="fc" id="L92">        d.put(&quot;Dependencies&quot;, toJsonDep(model.getDependencies()));</span>
<span class="fc" id="L93">        d.put(&quot;Modules&quot;, toJsonString(model.getModules()));</span>
<span class="fc" id="L94">        d.put(&quot;PluginRepositories&quot;, toJsonRep(model.getPluginRepositories()));</span>
        //d.put(&quot;&quot;, toJson(model.getProperties())); NOTE: ignore
<span class="fc" id="L96">        d.put(&quot;Repositories&quot;, toJsonRep(model.getRepositories()));</span>
<span class="fc" id="L97">        return d;</span>
    }

    private List&lt;Document&gt; toJsonDev(List&lt;Developer&gt; developers) {
<span class="fc" id="L101">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L102" title="1 of 2 branches missed.">        if(developers == null) return out;</span>
<span class="pc" id="L103">        developers.forEach(developer -&gt; out.add(toJson(developer)));</span>
<span class="fc" id="L104">        return out;</span>
    }

    private Document toJson(Developer developer) {
<span class="nc bnc" id="L108" title="All 2 branches missed.">        if(developer == null) return null;</span>
<span class="nc" id="L109">        Document d = new Document();</span>
<span class="nc" id="L110">        d.put(&quot;Id&quot;, toJson(developer.getId()));</span>
<span class="nc" id="L111">        d.put(&quot;Organization&quot;, toJson(developer.getOrganization()));</span>
        // d.put(&quot;&quot;, toJson(developer.getProperties())); NOTE: ignore
<span class="nc" id="L113">        d.put(&quot;OrganizationUrl&quot;, toJson(developer.getOrganizationUrl()));</span>
<span class="nc" id="L114">        d.put(&quot;Email&quot;, toJson(developer.getEmail()));</span>
<span class="nc" id="L115">        d.put(&quot;Name&quot;, toJson(developer.getName()));</span>
<span class="nc" id="L116">        d.put(&quot;Timezone&quot;, toJson(developer.getTimezone()));</span>
<span class="nc" id="L117">        d.put(&quot;Url&quot;, toJson(developer.getUrl()));</span>
<span class="nc" id="L118">        d.put(&quot;Roles&quot;, toJsonString(developer.getRoles()));</span>
<span class="nc" id="L119">        return d;</span>
    }


    private List&lt;Document&gt; toJsonLic(List&lt;License&gt; licenses) {
<span class="fc" id="L124">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L125" title="1 of 2 branches missed.">        if(licenses == null) return out;</span>
<span class="fc" id="L126">        licenses.forEach(license -&gt; out.add(toJson(license)));</span>
<span class="fc" id="L127">        return out;</span>
    }

    private Document toJson(License license) {
<span class="pc bpc" id="L131" title="1 of 2 branches missed.">        if(license == null) return null;</span>
<span class="fc" id="L132">        Document d = new Document();</span>
<span class="fc" id="L133">        d.put(&quot;Distribution&quot;, toJson(license.getDistribution()));</span>
<span class="fc" id="L134">        d.put(&quot;Comments&quot;, toJson(license.getComments()));</span>
<span class="fc" id="L135">        d.put(&quot;Name&quot;, toJson(license.getName()));</span>
<span class="fc" id="L136">        d.put(&quot;Url&quot;, toJson(license.getUrl()));</span>
<span class="fc" id="L137">        return d;</span>
    }

    private List&lt;Document&gt; toJsonMai(List&lt;MailingList&gt; mailingLists) {
<span class="fc" id="L141">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L142" title="1 of 2 branches missed.">        if(mailingLists == null) return out;</span>
<span class="fc" id="L143">        mailingLists.forEach(mailingList -&gt; out.add(toJson(mailingList)));</span>
<span class="fc" id="L144">        return out;</span>
    }

    private Document toJson(MailingList mailingList) {
<span class="pc bpc" id="L148" title="1 of 2 branches missed.">        if(mailingList == null) return null;</span>
<span class="fc" id="L149">        Document d = new Document();</span>
<span class="fc" id="L150">        d.put(&quot;Archive&quot;, toJson(mailingList.getArchive()));</span>
<span class="fc" id="L151">        d.put(&quot;Name&quot;, toJson(mailingList.getName()));</span>
<span class="fc" id="L152">        d.put(&quot;Post&quot;, toJson(mailingList.getPost()));</span>
<span class="fc" id="L153">        d.put(&quot;Subscribe&quot;, toJson(mailingList.getSubscribe()));</span>
<span class="fc" id="L154">        d.put(&quot;Unsubscribe&quot;, toJson(mailingList.getUnsubscribe()));</span>
<span class="fc" id="L155">        d.put(&quot;OtherArchives&quot;, toJsonString(mailingList.getOtherArchives()));</span>
<span class="fc" id="L156">        return d;</span>
    }

    private List&lt;String&gt; toJsonString(List&lt;String&gt; texts) {
<span class="fc" id="L160">        return texts;</span>
    }

    private Document toJson(Prerequisites prerequisites) {
<span class="pc bpc" id="L164" title="1 of 2 branches missed.">        if(prerequisites == null) return null;</span>
<span class="nc" id="L165">        Document d = new Document();</span>
<span class="nc" id="L166">        d.put(&quot;Maven&quot;, toJson(prerequisites.getMaven()));</span>
<span class="nc" id="L167">        return d;</span>
    }

    private Document toJson(Organization organization) {
<span class="pc bpc" id="L171" title="1 of 2 branches missed.">        if(organization == null) return null;</span>
<span class="fc" id="L172">        Document d = new Document();</span>
<span class="fc" id="L173">        d.put(&quot;Name&quot;, toJson(organization.getName()));</span>
<span class="fc" id="L174">        d.put(&quot;Url&quot;, toJson(organization.getUrl()));</span>
<span class="fc" id="L175">        return d;</span>
    }

    private Document toJson(Parent parent) {
<span class="pc bpc" id="L179" title="1 of 2 branches missed.">        if(parent == null) return null;</span>
<span class="fc" id="L180">        Document d = new Document();</span>
<span class="fc" id="L181">        d.put(&quot;ArtifactId&quot;, toJson(parent.getArtifactId()));</span>
<span class="fc" id="L182">        d.put(&quot;Id&quot;, toJson(parent.getId()));</span>
<span class="fc" id="L183">        d.put(&quot;GroupId&quot;, toJson(parent.getGroupId()));</span>
<span class="fc" id="L184">        d.put(&quot;RelativePath&quot;, toJson(parent.getRelativePath()));</span>
<span class="fc" id="L185">        d.put(&quot;Version&quot;, toJson(parent.getVersion()));</span>
<span class="fc" id="L186">        return d;</span>
    }

    private List&lt;Document&gt; toJsonPro(List&lt;Profile&gt; profiles) {
<span class="fc" id="L190">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L191" title="1 of 2 branches missed.">        if(profiles == null) return out;</span>
<span class="fc" id="L192">        profiles.forEach(profile -&gt; out.add(toJson(profile)));</span>
<span class="fc" id="L193">        return out;</span>
    }

    private Document toJson(Profile profile) {
<span class="pc bpc" id="L197" title="1 of 2 branches missed.">        if(profile == null) return null;</span>
<span class="fc" id="L198">        Document d = new Document();</span>
<span class="fc" id="L199">        d.put(&quot;DependencyManagement&quot;, toJson(profile.getDependencyManagement()));</span>
<span class="fc" id="L200">        d.put(&quot;DistributionManagement&quot;, toJson(profile.getDistributionManagement()));</span>
<span class="fc" id="L201">        d.put(&quot;Id&quot;, toJson(profile.getId()));</span>
        // d.put(&quot;&quot;, toJson(profile.getProperties())); NOTE: ignore
<span class="fc" id="L203">        d.put(&quot;Source&quot;, toJson(profile.getSource()));</span>
<span class="fc" id="L204">        d.put(&quot;Modules&quot;, toJsonString(profile.getModules()));</span>
<span class="fc" id="L205">        d.put(&quot;Build&quot;, toJson(profile.getBuild()));</span>
<span class="fc" id="L206">        d.put(&quot;Activation&quot;, toJson(profile.getActivation()));</span>
<span class="fc" id="L207">        d.put(&quot;Dependencies&quot;, toJsonDep(profile.getDependencies()));</span>
<span class="fc" id="L208">        d.put(&quot;PluginRepositories&quot;, toJsonPre(profile.getPluginRepositories()));</span>
<span class="fc" id="L209">        d.put(&quot;Reporting&quot;, toJson(profile.getReporting()));</span>
<span class="fc" id="L210">        d.put(&quot;Repositories&quot;, toJsonRep(profile.getRepositories()));</span>
<span class="fc" id="L211">        return d;</span>
    }

    private Document toJson(Reporting reporting) {
<span class="fc bfc" id="L215" title="All 2 branches covered.">        if(reporting == null) return null;</span>
<span class="fc" id="L216">        Document d = new Document();</span>
<span class="fc" id="L217">        d.put(&quot;OutputDirectory&quot;, toJson(reporting.getOutputDirectory()));</span>
<span class="fc" id="L218">        d.put(&quot;ExcludeDefaults&quot;, toJson(reporting.getExcludeDefaults()));</span>
<span class="fc" id="L219">        d.put(&quot;Plugins&quot;, toJsonPlu(reporting.getPlugins()));</span>
        // d.put(&quot;&quot;, toJson(reporting.getReportPluginsAsMap())); NOTE: ignore for now
<span class="fc" id="L221">        return d;</span>
    }

    private List&lt;Document&gt; toJsonPlu(List&lt;ReportPlugin&gt; plugins) {
<span class="fc" id="L225">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L226" title="1 of 2 branches missed.">        if(plugins == null) return out;</span>
<span class="fc" id="L227">        plugins.forEach(plugin -&gt; out.add(toJson(plugin)));</span>
<span class="fc" id="L228">        return out;</span>
    }

    private Document toJson(ReportPlugin plugin) {
<span class="pc bpc" id="L232" title="1 of 2 branches missed.">        if(plugin == null) return null;</span>
<span class="fc" id="L233">        Document d = new Document();</span>
<span class="fc" id="L234">        d.put(&quot;ArtifactId&quot;, toJson(plugin.getArtifactId()));</span>
<span class="fc" id="L235">        d.put(&quot;GroupId&quot;, toJson(plugin.getGroupId()));</span>
<span class="fc" id="L236">        d.put(&quot;Key&quot;, toJson(plugin.getKey()));</span>
<span class="fc" id="L237">        d.put(&quot;Version&quot;, toJson(plugin.getVersion()));</span>
<span class="fc" id="L238">        d.put(&quot;ReportSets&quot;, toJsonRes(plugin.getReportSets()));</span>
        //d.put(&quot;&quot;, toJson(plugin.getReportSetsAsMap())); NOTE: ignore
        //d.put(&quot;&quot;, toJson(plugin.getConfiguration())); NOTE: ignore
<span class="fc" id="L241">        return d;</span>
    }

    private List&lt;Document&gt; toJsonRes(List&lt;ReportSet&gt; reportSets) {
<span class="fc" id="L245">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L246" title="1 of 2 branches missed.">        if(reportSets == null) return out;</span>
<span class="pc" id="L247">        reportSets.forEach(reportSet -&gt; out.add(toJson(reportSet)));</span>
<span class="fc" id="L248">        return out;</span>
    }

    private Document toJson(ReportSet reportSet) {
<span class="nc bnc" id="L252" title="All 2 branches missed.">        if(reportSet == null) return null;</span>
<span class="nc" id="L253">        Document d = new Document();</span>
<span class="nc" id="L254">        d.put(&quot;Id&quot;, toJson(reportSet.getId()));</span>
<span class="nc" id="L255">        d.put(&quot;Reports&quot;, toJsonString(reportSet.getReports()));</span>
<span class="nc" id="L256">        return d;</span>
    }

    private List&lt;Document&gt; toJsonPre(List&lt;Repository&gt; pluginRepositories) {
<span class="fc" id="L260">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L261" title="1 of 2 branches missed.">        if(pluginRepositories == null) return out;</span>
<span class="pc" id="L262">        pluginRepositories.forEach(pluginRepositorie -&gt; out.add(toJsonPre(pluginRepositorie)));</span>
<span class="fc" id="L263">        return out;</span>
    }

    private Document toJsonPre(Repository pluginRepositorie) {
<span class="nc bnc" id="L267" title="All 2 branches missed.">        if(pluginRepositorie == null) return null;</span>
<span class="nc" id="L268">        Document d = new Document();</span>
<span class="nc" id="L269">        d.put(&quot;Id&quot;, toJson(pluginRepositorie.getId()));</span>
<span class="nc" id="L270">        d.put(&quot;Layout&quot;, toJson(pluginRepositorie.getLayout()));</span>
<span class="nc" id="L271">        d.put(&quot;Name&quot;, toJson(pluginRepositorie.getName()));</span>
<span class="nc" id="L272">        d.put(&quot;Url&quot;, toJson(pluginRepositorie.getUrl()));</span>
<span class="nc" id="L273">        d.put(&quot;Releases&quot;, toJson(pluginRepositorie.getReleases()));</span>
<span class="nc" id="L274">        d.put(&quot;Snapshots&quot;, toJson(pluginRepositorie.getSnapshots()));</span>
<span class="nc" id="L275">        return d;</span>
    }

    private Document toJson(RepositoryPolicy releases) {
<span class="pc bpc" id="L279" title="1 of 2 branches missed.">        if(releases == null) return null;</span>
<span class="nc" id="L280">        Document d = new Document();</span>
<span class="nc" id="L281">        d.put(&quot;ChecksumPolicy&quot;, toJson(releases.getChecksumPolicy()));</span>
<span class="nc" id="L282">        d.put(&quot;Enabled&quot;, toJson(releases.getEnabled()));</span>
<span class="nc" id="L283">        d.put(&quot;UpdatePolicy&quot;, toJson(releases.getUpdatePolicy()));</span>
<span class="nc" id="L284">        return d;</span>
    }

    private Document toJson(Activation activation) {
<span class="fc bfc" id="L288" title="All 2 branches covered.">        if(activation == null) return null;</span>
<span class="fc" id="L289">        Document d = new Document();</span>
<span class="fc" id="L290">        d.put(&quot;Jdk&quot;, toJson(activation.getJdk()));</span>
<span class="fc" id="L291">        d.put(&quot;File&quot;, toJson(activation.getFile()));</span>
<span class="fc" id="L292">        d.put(&quot;Os&quot;, toJson(activation.getOs()));</span>
<span class="fc" id="L293">        d.put(&quot;Property&quot;, toJson(activation.getProperty()));</span>
<span class="fc" id="L294">        return d;</span>
    }

    private Document toJson(ActivationProperty property) {
<span class="pc bpc" id="L298" title="1 of 2 branches missed.">        if(property == null) return null;</span>
<span class="fc" id="L299">        Document d = new Document();</span>
<span class="fc" id="L300">        d.put(&quot;Name&quot;, toJson(property.getName()));</span>
<span class="fc" id="L301">        d.put(&quot;Value&quot;, toJson(property.getValue()));</span>
<span class="fc" id="L302">        return d;</span>
    }

    private Object toJson(ActivationOS os) {
<span class="pc bpc" id="L306" title="1 of 2 branches missed.">        if(os == null) return null;</span>
<span class="nc" id="L307">        Document d = new Document();</span>
<span class="nc" id="L308">        d.put(&quot;Arch&quot;, toJson(os.getArch()));</span>
<span class="nc" id="L309">        d.put(&quot;Family&quot;, toJson(os.getFamily()));</span>
<span class="nc" id="L310">        d.put(&quot;Name&quot;, toJson(os.getName()));</span>
<span class="nc" id="L311">        d.put(&quot;Version&quot;, toJson(os.getVersion()));</span>
<span class="nc" id="L312">        return d;</span>
    }

    private Document toJson(ActivationFile file) {
<span class="pc bpc" id="L316" title="1 of 2 branches missed.">        if(file == null) return null;</span>
<span class="nc" id="L317">        Document d = new Document();</span>
<span class="nc" id="L318">        d.put(&quot;Exists&quot;, toJson(file.getExists()));</span>
<span class="nc" id="L319">        d.put(&quot;Missing&quot;, toJson(file.getMissing()));</span>
<span class="nc" id="L320">        return d;</span>
    }

    private Document toJson(BuildBase build) {
<span class="fc bfc" id="L324" title="All 2 branches covered.">        if(build == null) return null;</span>
<span class="fc" id="L325">        Document d = new Document();</span>
<span class="fc" id="L326">        d.put(&quot;Directory&quot;, toJson(build.getDirectory()));</span>
<span class="fc" id="L327">        d.put(&quot;DefaultGoal&quot;, toJson(build.getDefaultGoal()));</span>
<span class="fc" id="L328">        d.put(&quot;FinalName&quot;, toJson(build.getFinalName()));</span>
<span class="fc" id="L329">        d.put(&quot;PluginManagement&quot;, toJson(build.getPluginManagement()));</span>
<span class="fc" id="L330">        d.put(&quot;Filters&quot;, toJsonString(build.getFilters()));</span>
<span class="fc" id="L331">        d.put(&quot;Resources&quot;, toJsonRsc(build.getResources()));</span>
<span class="fc" id="L332">        d.put(&quot;TestResources&quot;, toJsonRsc(build.getTestResources()));</span>
<span class="fc" id="L333">        d.put(&quot;Plugins&quot;, toJsonPgn(build.getPlugins()));</span>
<span class="fc" id="L334">        return d;</span>
    }

    private List&lt;Document&gt; toJsonPgn(List&lt;Plugin&gt; plugins) {
<span class="fc" id="L338">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L339" title="1 of 2 branches missed.">        if(plugins == null) return out;</span>
<span class="fc" id="L340">        plugins.forEach(plugin -&gt; out.add(toJson(plugin)));</span>
<span class="fc" id="L341">        return out;</span>
    }

    private Document toJson(Plugin plugin) {
<span class="pc bpc" id="L345" title="1 of 2 branches missed.">        if(plugin == null) return null;</span>
<span class="fc" id="L346">        Document d = new Document();</span>
<span class="fc" id="L347">        d.put(&quot;ArtifactId&quot;, toJson(plugin.getArtifactId()));</span>
<span class="fc" id="L348">        d.put(&quot;Id&quot;, toJson(plugin.getId()));</span>
<span class="fc" id="L349">        d.put(&quot;GroupId&quot;, toJson(plugin.getGroupId()));</span>
<span class="fc" id="L350">        d.put(&quot;Extensions&quot;, toJson(plugin.getExtensions()));</span>
<span class="fc" id="L351">        d.put(&quot;Key&quot;, toJson(plugin.getKey()));</span>
<span class="fc" id="L352">        d.put(&quot;Version&quot;, toJson(plugin.getVersion()));</span>
<span class="fc" id="L353">        d.put(&quot;Inherited&quot;, toJson(plugin.getInherited()));</span>
<span class="fc" id="L354">        d.put(&quot;Dependencies&quot;, toJsonDep(plugin.getDependencies()));</span>
<span class="fc" id="L355">        d.put(&quot;Executions&quot;, toJsonExe(plugin.getExecutions()));</span>
<span class="fc" id="L356">        return d;</span>
    }

    private List&lt;Document&gt; toJsonExe(List&lt;PluginExecution&gt; executions) {
<span class="fc" id="L360">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L361" title="1 of 2 branches missed.">        if(executions == null) return out;</span>
<span class="fc" id="L362">        executions.forEach(execution -&gt; out.add(toJson(execution)));</span>
<span class="fc" id="L363">        return out;</span>
    }

    private Document toJson(PluginExecution execution) {
<span class="pc bpc" id="L367" title="1 of 2 branches missed.">        if(execution == null) return null;</span>
<span class="fc" id="L368">        Document d = new Document();</span>
<span class="fc" id="L369">        d.put(&quot;Id&quot;, toJson(execution.getId()));</span>
<span class="fc" id="L370">        d.put(&quot;Phase&quot;, toJson(execution.getPhase()));</span>
<span class="fc" id="L371">        d.put(&quot;Inherited&quot;, toJson(execution.getInherited()));</span>
<span class="fc" id="L372">        d.put(&quot;Goals&quot;, toJsonString(execution.getGoals()));</span>
<span class="fc" id="L373">        d.put(&quot;Priority&quot;, toJson(execution.getPriority()));</span>
<span class="fc" id="L374">        return d;</span>
    }

    private int toJson(int number) {
<span class="fc" id="L378">        return number;</span>
    }

    private List&lt;Document&gt; toJsonRsc(List&lt;Resource&gt; resources) {
<span class="fc" id="L382">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L383" title="1 of 2 branches missed.">        if(resources == null) return out;</span>
<span class="pc" id="L384">        resources.forEach(resource -&gt; out.add(toJson(resource)));</span>
<span class="fc" id="L385">        return out;</span>
    }

    private Document toJson(Resource resource) {
<span class="nc bnc" id="L389" title="All 2 branches missed.">        if(resource == null) return null;</span>
<span class="nc" id="L390">        Document d = new Document();</span>
<span class="nc" id="L391">        d.put(&quot;MergeId&quot;, toJson(resource.getMergeId()));</span>
<span class="nc" id="L392">        d.put(&quot;Directory&quot;, toJson(resource.getDirectory()));</span>
<span class="nc" id="L393">        d.put(&quot;Filtering&quot;, toJson(resource.getFiltering()));</span>
<span class="nc" id="L394">        d.put(&quot;TargetPath&quot;, toJson(resource.getTargetPath()));</span>
<span class="nc" id="L395">        d.put(&quot;Excludes&quot;, toJsonString(resource.getExcludes()));</span>
<span class="nc" id="L396">        d.put(&quot;Includes&quot;, toJsonString(resource.getIncludes()));</span>
<span class="nc" id="L397">        return d;</span>
    }

    private Object toJson(PluginManagement pluginManagement) {
<span class="fc bfc" id="L401" title="All 2 branches covered.">        if(pluginManagement == null) return null;</span>
<span class="fc" id="L402">        Document d = new Document();</span>
<span class="fc" id="L403">        d.put(&quot;Plugins&quot;, toJsonPgn(pluginManagement.getPlugins()));</span>
<span class="fc" id="L404">        return d;</span>
    }

    private Document toJson(Scm scm) {
<span class="pc bpc" id="L408" title="1 of 2 branches missed.">        if(scm == null) return null;</span>
<span class="fc" id="L409">        Document d = new Document();</span>
<span class="fc" id="L410">        d.put(&quot;Connection&quot;, toJson(scm.getConnection()));</span>
<span class="fc" id="L411">        d.put(&quot;DeveloperConnection&quot;, toJson(scm.getDeveloperConnection()));</span>
<span class="fc" id="L412">        d.put(&quot;Tag&quot;, toJson(scm.getTag()));</span>
<span class="fc" id="L413">        d.put(&quot;Url&quot;, toJson(scm.getUrl()));</span>
<span class="fc" id="L414">        return d;</span>
    }

    private List&lt;Document&gt; toJsonDep(List&lt;Dependency&gt; dependencies) {
<span class="fc" id="L418">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L419" title="1 of 2 branches missed.">        if(dependencies == null) return out;</span>
<span class="fc" id="L420">        dependencies.forEach(dependencie -&gt; out.add(toJson(dependencie)));</span>
<span class="fc" id="L421">        return out;</span>
    }

    private Document toJson(Dependency dependencie) {
<span class="pc bpc" id="L425" title="1 of 2 branches missed.">        if(dependencie == null) return null;</span>
<span class="fc" id="L426">        Document d = new Document();</span>
<span class="fc" id="L427">        d.put(&quot;ManagementKey&quot;, toJson(dependencie.getManagementKey()));</span>
<span class="fc" id="L428">        d.put(&quot;ArtifactId&quot;, toJson(dependencie.getArtifactId()));</span>
<span class="fc" id="L429">        d.put(&quot;Classifier&quot;, toJson(dependencie.getClassifier()));</span>
<span class="fc" id="L430">        d.put(&quot;GroupId&quot;, toJson(dependencie.getGroupId()));</span>
<span class="fc" id="L431">        d.put(&quot;Optional&quot;, toJson(dependencie.getOptional()));</span>
<span class="fc" id="L432">        d.put(&quot;Scope&quot;, toJson(dependencie.getScope()));</span>
<span class="fc" id="L433">        d.put(&quot;SystemPath&quot;, toJson(dependencie.getSystemPath()));</span>
<span class="fc" id="L434">        d.put(&quot;Type&quot;, toJson(dependencie.getType()));</span>
<span class="fc" id="L435">        d.put(&quot;Version&quot;, toJson(dependencie.getVersion()));</span>
<span class="fc" id="L436">        d.put(&quot;Exclusions&quot;, toJsonPex(dependencie.getExclusions()));</span>
<span class="fc" id="L437">        return d;</span>
    }

    private List&lt;Document&gt; toJsonPex(List&lt;Exclusion&gt; exclusions) {
<span class="fc" id="L441">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L442" title="1 of 2 branches missed.">        if(exclusions == null) return out;</span>
<span class="fc" id="L443">        exclusions.forEach(exclusion -&gt; out.add(toJson(exclusion)));</span>
<span class="fc" id="L444">        return out;</span>
    }

    private Document toJson(Exclusion exclusion) {
<span class="pc bpc" id="L448" title="1 of 2 branches missed.">        if(exclusion == null) return null;</span>
<span class="fc" id="L449">        Document d = new Document();</span>
<span class="fc" id="L450">        d.put(&quot;ArtifactId&quot;, toJson(exclusion.getArtifactId()));</span>
<span class="fc" id="L451">        d.put(&quot;GroupId&quot;, toJson(exclusion.getGroupId()));</span>
<span class="fc" id="L452">        return d;</span>
    }

    private List&lt;Document&gt; toJsonRep(List&lt;Repository&gt; repositories) {
<span class="fc" id="L456">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L457" title="1 of 2 branches missed.">        if(repositories == null) return out;</span>
<span class="pc" id="L458">        repositories.forEach(repositorie -&gt; out.add(toJson(repositorie)));</span>
<span class="fc" id="L459">        return out;</span>
    }

    private Document toJson(Repository repositorie) {
<span class="pc bpc" id="L463" title="1 of 2 branches missed.">        if(repositorie == null) return null;</span>
<span class="fc" id="L464">        Document d = new Document();</span>
<span class="fc" id="L465">        d.put(&quot;Snapshots&quot;, toJson(repositorie.getSnapshots()));</span>
<span class="fc" id="L466">        d.put(&quot;Releases&quot;, toJson(repositorie.getReleases()));</span>
<span class="fc" id="L467">        d.put(&quot;Url&quot;, toJson(repositorie.getUrl()));</span>
<span class="fc" id="L468">        d.put(&quot;Name&quot;, toJson(repositorie.getName()));</span>
<span class="fc" id="L469">        d.put(&quot;Layout&quot;, toJson(repositorie.getLayout()));</span>
<span class="fc" id="L470">        d.put(&quot;Id&quot;, toJson(repositorie.getId()));</span>
<span class="fc" id="L471">        return d;</span>
    }

    private List&lt;Document&gt; toJsonCon(List&lt;Contributor&gt; contributors) {
<span class="fc" id="L475">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L476" title="1 of 2 branches missed.">        if(contributors == null) return out;</span>
<span class="pc" id="L477">        contributors.forEach(contributor -&gt; out.add(toJson(contributor)));</span>
<span class="fc" id="L478">        return out;</span>
    }

    private Document toJson(Contributor contributor) {
<span class="nc bnc" id="L482" title="All 2 branches missed.">        if(contributor == null) return null;</span>
<span class="nc" id="L483">        Document d = new Document();</span>
<span class="nc" id="L484">        d.put(&quot;Organization&quot;, toJson(contributor.getOrganization()));</span>
        // d.put(&quot;&quot;, toJson(contributor.getProperties())); NOTE: ignore
<span class="nc" id="L486">        d.put(&quot;OrganizationUrl&quot;, toJson(contributor.getOrganizationUrl()));</span>
<span class="nc" id="L487">        d.put(&quot;Email&quot;, toJson(contributor.getEmail()));</span>
<span class="nc" id="L488">        d.put(&quot;Name&quot;, toJson(contributor.getName()));</span>
<span class="nc" id="L489">        d.put(&quot;Timezone&quot;, toJson(contributor.getTimezone()));</span>
<span class="nc" id="L490">        d.put(&quot;Url&quot;, toJson(contributor.getUrl()));</span>
<span class="nc" id="L491">        d.put(&quot;Roles&quot;, toJsonString(contributor.getRoles()));</span>
<span class="nc" id="L492">        return d;</span>
    }

    private Document toJson(DistributionManagement distributionManagement) {
<span class="fc bfc" id="L496" title="All 2 branches covered.">        if(distributionManagement == null) return null;</span>
<span class="fc" id="L497">        Document d = new Document();</span>
<span class="fc" id="L498">        d.put(&quot;DownloadUrl&quot;, toJson(distributionManagement.getDownloadUrl()));</span>
<span class="fc" id="L499">        d.put(&quot;Repository&quot;, toJson(distributionManagement.getRepository())); // as repository</span>
<span class="fc" id="L500">        d.put(&quot;SnapshotRepository&quot;, toJson(distributionManagement.getSnapshotRepository())); // as repository</span>
<span class="fc" id="L501">        d.put(&quot;Status&quot;, toJson(distributionManagement.getStatus()));</span>
<span class="fc" id="L502">        d.put(&quot;Relocation&quot;, toJson(distributionManagement.getRelocation()));</span>
<span class="fc" id="L503">        d.put(&quot;Site&quot;, toJson(distributionManagement.getSite()));</span>
<span class="fc" id="L504">        return d;</span>
    }

    private Object toJson(Site site) {
<span class="pc bpc" id="L508" title="1 of 2 branches missed.">        if(site == null) return null;</span>
<span class="nc" id="L509">        Document d = new Document();</span>
<span class="nc" id="L510">        d.put(&quot;Id&quot;, toJson(site.getId()));</span>
<span class="nc" id="L511">        d.put(&quot;Name&quot;, toJson(site.getName()));</span>
<span class="nc" id="L512">        d.put(&quot;Url&quot;, toJson(site.getUrl()));</span>
<span class="nc" id="L513">        return d;</span>
    }

    private Object toJson(Relocation relocation) {
<span class="pc bpc" id="L517" title="1 of 2 branches missed.">        if(relocation == null) return null;</span>
<span class="nc" id="L518">        Document d = new Document();</span>
<span class="nc" id="L519">        d.put(&quot;ArtifactId&quot;, toJson(relocation.getArtifactId()));</span>
<span class="nc" id="L520">        d.put(&quot;GroupId&quot;, toJson(relocation.getGroupId()));</span>
<span class="nc" id="L521">        d.put(&quot;Message&quot;, toJson(relocation.getMessage()));</span>
<span class="nc" id="L522">        d.put(&quot;Version&quot;, toJson(relocation.getVersion()));</span>
<span class="nc" id="L523">        return d;</span>
    }

    private Document toJson(DependencyManagement dependencyManagement) {
<span class="fc bfc" id="L527" title="All 2 branches covered.">        if(dependencyManagement == null) return null;</span>
<span class="fc" id="L528">        Document d = new Document();</span>
<span class="fc" id="L529">        d.put(&quot;Dependencies&quot;, toJsonDep(dependencyManagement.getDependencies()));</span>
<span class="fc" id="L530">        return d;</span>
    }

    private Document toJson(IssueManagement issueManagement) {
<span class="pc bpc" id="L534" title="1 of 2 branches missed.">        if(issueManagement == null) return null;</span>
<span class="fc" id="L535">        Document d = new Document();</span>
<span class="fc" id="L536">        d.put(&quot;System&quot;, toJson(issueManagement.getSystem()));</span>
<span class="fc" id="L537">        d.put(&quot;Url&quot;, toJson(issueManagement.getUrl()));</span>
<span class="fc" id="L538">        return d;</span>
    }

    private String toJson(String text) {
<span class="fc" id="L542">        return text;</span>
    }

    private Document toJson(CiManagement ciManagement) {
<span class="pc bpc" id="L546" title="1 of 2 branches missed.">        if(ciManagement == null) return null;</span>
<span class="nc" id="L547">        Document d = new Document();</span>
<span class="nc" id="L548">        d.put(&quot;System&quot;, toJson(ciManagement.getSystem()));</span>
<span class="nc" id="L549">        d.put(&quot;Url&quot;, toJson(ciManagement.getUrl()));</span>
<span class="nc" id="L550">        d.put(&quot;Notifiers&quot;, toJsonNot(ciManagement.getNotifiers()));</span>
<span class="nc" id="L551">        return d;</span>
    }

    private List&lt;Document&gt; toJsonNot(List&lt;Notifier&gt; notifiers) {
<span class="nc" id="L555">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L556" title="All 2 branches missed.">        if(notifiers == null) return out;</span>
<span class="nc" id="L557">        notifiers.forEach(notifier -&gt; out.add(toJson(notifier)));</span>
<span class="nc" id="L558">        return out;</span>
    }

    private Document toJson(Notifier notifier) {
<span class="nc bnc" id="L562" title="All 2 branches missed.">        if(notifier == null) return null;</span>
<span class="nc" id="L563">        Document d = new Document();</span>
<span class="nc" id="L564">        d.put(&quot;Address&quot;, toJson(notifier.getAddress()));</span>
        // d.put(&quot;&quot;, toJson(notifier.getConfiguration())); NOTE: ignore
<span class="nc" id="L566">        d.put(&quot;Type&quot;, toJson(notifier.getType()));</span>
<span class="nc" id="L567">        return d;</span>
    }

    private Document toJson(Build build) {
<span class="pc bpc" id="L571" title="1 of 2 branches missed.">        if(build == null) return null;</span>
<span class="fc" id="L572">        Document d = new Document();</span>
<span class="fc" id="L573">        d.put(&quot;PluginManagement&quot;, toJson(build.getPluginManagement()));</span>
<span class="fc" id="L574">        d.put(&quot;OutputDirectory&quot;, toJson(build.getOutputDirectory()));</span>
<span class="fc" id="L575">        d.put(&quot;ScriptSourceDirectory&quot;, toJson(build.getScriptSourceDirectory()));</span>
<span class="fc" id="L576">        d.put(&quot;SourceDirectory&quot;, toJson(build.getSourceDirectory()));</span>
<span class="fc" id="L577">        d.put(&quot;TestOutputDirectory&quot;, toJson(build.getTestOutputDirectory()));</span>
<span class="fc" id="L578">        d.put(&quot;TestSourceDirectory&quot;, toJson(build.getTestSourceDirectory()));</span>
<span class="fc" id="L579">        d.put(&quot;DefaultGoal&quot;, toJson(build.getDefaultGoal()));</span>
<span class="fc" id="L580">        d.put(&quot;Directory&quot;, toJson(build.getDirectory()));</span>
<span class="fc" id="L581">        d.put(&quot;FinalName&quot;, toJson(build.getFinalName()));</span>
<span class="fc" id="L582">        d.put(&quot;Extensions&quot;, toJsonExt(build.getExtensions()));</span>
<span class="fc" id="L583">        d.put(&quot;Filters&quot;, toJsonString(build.getFilters()));</span>
<span class="fc" id="L584">        d.put(&quot;Plugins&quot;, toJsonPgn(build.getPlugins()));</span>
<span class="fc" id="L585">        d.put(&quot;Resources&quot;, toJsonRsc(build.getResources()));</span>
<span class="fc" id="L586">        d.put(&quot;TestResources&quot;, toJsonRsc(build.getTestResources()));</span>
<span class="fc" id="L587">        return d;</span>
    }

    private List&lt;Document&gt; toJsonExt(List&lt;Extension&gt; extensions) {
<span class="fc" id="L591">        List&lt;Document&gt; out = new ArrayList&lt;&gt;();</span>
<span class="pc bpc" id="L592" title="1 of 2 branches missed.">        if(extensions == null) return out;</span>
<span class="pc" id="L593">        extensions.forEach(extension -&gt; out.add(toJson(extension)));</span>
<span class="fc" id="L594">        return out;</span>
    }

    private Document toJson(Extension extension) {
<span class="nc bnc" id="L598" title="All 2 branches missed.">        if(extension == null) return null;</span>
<span class="nc" id="L599">        Document d = new Document();</span>
<span class="nc" id="L600">        d.put(&quot;ArtifactId&quot;, toJson(extension.getArtifactId()));</span>
<span class="nc" id="L601">        d.put(&quot;GroupId&quot;, toJson(extension.getGroupId()));</span>
<span class="nc" id="L602">        d.put(&quot;Version&quot;, toJson(extension.getVersion()));</span>
<span class="nc" id="L603">        return d;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.0.201801022044</span></div></body></html>